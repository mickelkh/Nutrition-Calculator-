<!DOCTYPE html>
<html>
<head>
  <title>Interactive Nutrition Calculator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f4f4f4;
      color: #333;
      padding: 20px;
      max-width: 400px;
      margin: auto;
    }

    h2, h3 { text-align: center; }

    label {
      display: block;
      margin-top: 15px;
      font-weight: bold;
    }

    input, select {
      width: 100%;
      padding: 8px;
      margin-bottom: 10px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }

    #goalLabel {
      font-weight: bold;
      color: #555;
      margin-left: 5px;
    }

    #output {
      margin-top: 20px;
      padding: 15px;
      border-radius: 10px;
      background-color: #fff;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      transition: all 0.3s ease;
    }

    .calories {
      font-size: 20px;
      font-weight: bold;
    }

    .protein, .fat, .carbs {
      margin-top: 5px;
      font-weight: bold;
    }

    .deficit { color: #e74c3c; } /* red */
    .surplus { color: #27ae60; } /* green */
  </style>
</head>
<body>
  <h2>Nutrition Calculator</h2>

  <!-- Personal Info -->
  <label>Weight (kg):</label>
  <input id="weight" type="number" placeholder="Weight kg">

  <label>Height (cm):</label>
  <input id="height" type="number" placeholder="Height cm">

  <label>Age:</label>
  <input id="age" type="number" placeholder="Age">

  <label>Gender:</label>
  <select id="gender">
    <option value="M">Male</option>
    <option value="F">Female</option>
  </select>

  <label>Activity Level:</label>
  <select id="activity">
    <option value="1.2">Sedentary (little/no exercise)</option>
    <option value="1.375">Light (1–3 days/week)</option>
    <option value="1.55">Moderate (3–5 days/week)</option>
    <option value="1.725">Active (6–7 days/week)</option>
    <option value="1.9">Very Active (2x/day training)</option>
  </select>

  <!-- Goal Input -->
  <label>Goal:</label>
  <select id="goal">
    <option value="lose">Fat Loss</option>
    <option value="gain">Muscle Gain</option>
  </select>

  <label>Goal % (10–25% recommended): <span id="goalLabel">15%</span></label>
  <input id="goalPercent" type="range" min="10" max="25" value="15" step="1" oninput="updateGoalLabel()">

  <h3>Results:</h3>
  <div id="output"></div>

  <script>
    function updateGoalLabel() {
      document.getElementById('goalLabel').innerText = document.getElementById('goalPercent').value + '%';
      calculate();
    }

    function calculate() {
      let w = +document.getElementById('weight').value;
      let h = +document.getElementById('height').value;
      let a = +document.getElementById('age').value;
      let g = document.getElementById('gender').value;
      let act = +document.getElementById('activity').value;
      let goal = document.getElementById('goal').value;
      let goalPercent = +document.getElementById('goalPercent').value;

      if (!w || !h || !a) {
        document.getElementById('output').innerHTML = "<em>Please enter weight, height, and age.</em>";
        return;
      }

      // BMR
      let bmr = g=='M' ? 10*w + 6.25*h - 5*a + 5 : 10*w + 6.25*h - 5*a - 161;

      // TDEE
      let tdee = bmr * act;

      // Adjust calories based on goal %
      let targetCalories = goal=='lose' ? tdee*(1 - goalPercent/100) : tdee*(1 + goalPercent/100);

      // Macronutrients based on goal
      let protein, fat, carbs;
      if(goal=='lose'){
        protein = w*2.2;
        fat = (targetCalories*0.25)/9;
      } else {
        protein = w*1.8;
        fat = (targetCalories*0.2)/9;
      }
      carbs = (targetCalories - (protein*4 + fat*9))/4;

      // Output with color coding
      let calClass = goal=='lose' ? 'deficit' : 'surplus';
      document.getElementById('output').innerHTML = 
        `<div class="calories ${calClass}">Calories: ${Math.round(targetCalories)} kcal</div>
         <div class="protein">Protein: ${Math.round(protein)} g</div>
         <div class="fat">Fat: ${Math.round(fat)} g</div>
         <div class="carbs">Carbs: ${Math.round(carbs)} g</div>`;
    }

    // Event listeners
    ['weight','height','age','gender','activity','goal'].forEach(id => {
      document.getElementById(id).addEventListener('input', calculate);
      document.getElementById(id).addEventListener('change', calculate);
    });

    // Initial calculation
    calculate();
  </script>
</body>
</html>
